---
title: "Challenge 2"
author: "Emma Narkewicz"
description: "In this challenging I completed data wrangling on the Birds data set using group() and summarise() and summary statistic functions"
date: "09/21/2022"
format:
  html:
    toc: true
    code-fold: true
    code-copy: true
    code-tools: true
categories:
  - challenge_2
  - emma_narkewicz
  - birds
---

```{r}
#| label: setup
#| warning: false
#| message: false

library(tidyverse)

knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)
```

## Challenge Overview

Today's challenge is to

1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)
2)  provide summary statistics for different interesting groups within the data, and interpret those statistics

## Read in the Data

I selected thebirds.csv for this Challenge set to push myself.

```{r Reading in Data}
#Making sure I have the right library open
library(tidyverse)
#Reading in my selected data set and 
Birds <- read_csv("_data/birds.csv")

```

## Describe the data

This "Birds" data set has 30977 rows and 14 columns. Out of these 14 columns, 8 columns contain character <chr> type data and 6 columns contain numeric <dbl> data. Most (6 out of 8) of these numeric columns contains codes for items in other columns, such as domain, area, element, item, and year. These codes aren't needed for this analysis.

This "Birds" data set spans from 1961 through 2018 and contains information about the value of poultry stock, for different areas, items, and years. The **area** column describes ranges from estimates of the total bird-stock in the world-wide, for entire continents, or for countries. The **item** column describes the type of bird (e.g., geese, chicken) in the bird stock. The value of these stocks is not expressed in monetary units, but in the unit of "1000 heads" which translates to a 1000 birds. So a value of 1000 with units of 1000 head is 1 million birds.

This international bird data set was likely gathered by a governmental regulatory agency to track information about the amount of available poultry stock in different areas to better understand agricultural and food resources, specifically the United Nation's Food and Agricultural Organization (FAO). Based on external research, the FAO flags described in the **flag** and **flag description** columns refers to the quality of the data source in that row.

The citation for the FAO flag information is included below FAO. (2020). *Statistical Standard Series - Quality indicators for external users*. Inter-Departmental Working Group Technical Task Force on Statistics. Retrieved September 19, 2022, from https://www.fao.org/3/cb9309en/cb9309en.pdf.

```{r}
#exploring the data set through the head function
head(Birds) 
#Find min and max of years
summarise(Birds, min(Year), max(Year))

```

## Provide Grouped Summary Statistics, Explain, & Interpret

Conduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.

###Value

Before creating subgroups, I analyzed just the information from the Value column to become familiar with the data set.

####Central Tendancy and Dispersion

The mean Value of Bird-Stock is 99410.63 with units of 1000 head meaning (**mean Value of 99.4 million birds**), the median Value of Bird-Stock is 1800, with units of 1000 head (**median Value of 1.8 million birds**), and the mode Value of Bird stocks is 2 with units of 1000 head (**mode Value of 2000 birds**). The minimum Value of the data set was was 0 and the maximum Value was 23707134 with units of 1000 head (**maximum Value of 23.7 billion birds**). The standard deviation of Values in the data set was 720611.4 with units of 1000 head (**standard deviation of Value of 720.6 million birds** and the Interquartile Range of Bird-Stock Value was 15233, with units of 1000 head (**IQR of Value in the data set is 15.2 millions birds**).

I included the the central tendency and dispersion converted to birds as units of 1000 head was challenging to comprehend. The mean of the Value (**99.4 million birds**) being so much higher than the median Value of the data set (**1.8 million views**) indicates that most of the values in the birds data set are low with some high values skewing the mean higher. This is supported by the fact that the mode of the data sets values is 2 with units of 1000-head (**2,000 birds**) and the large maximum of **23.7 billions birds**. To calculate the mode without the use of a built in function in R, I created a bar chart with an x-axis of Value and then used the xlim() function to focus in on where the data was concentrated and identify the mode visually.

The IQR of the Values in the data set of **15.2 million birds** indicates that outside of high outliers in the data set, the Value are not very spread, as the IQR measures the difference between the lower(Q1) and upper (Q3) quartiles. Another measure of spread, the standard deviation of **720.6 birds** is skewed by the high outliers and maximum values in the billions, just as the mean was skewed higher.

####Highest and Lowest Values

To look at what factors are associated with the highest and lowest Values in the data set, I created one table with the highest 50 Values and 1 table with the 50 lowest values using the arrange(), select(), and slice() functions. I selected the Item, Area, Value, Year, Flag, and Flag Description to see if the type of bird, location, time, and data quality had anything to do with low and high values, with value actually measuring the size of the bird-stock.

Chickens comprising the items of the top 50 bird-stocks with most value, with value indicating size of bird stock. The year of the bird stock seemed to contribute to the value of the bird-stocks, with the top 10 most valuable bird-stocks happening between 2009 and 2018, all the top 50 most bird stock all occurring after 1985, suggesting bird-stocks expands with time. The 10 most valuable stocks were all under the area of "world", and the 50 most valuable bird-stocks were all based in the area of the world or Asia. This makes sense as all the birds in the world in the large continents of Asia is a lot of birds! Looking at the flag and flag description for this data, these top values were determined by aggregate data, which may include official, semi-official, estimated or calculated data. For world and continent based data, it makes sense that some of these values needs to be estimated or calculated.

The 50 rows with the lowest values all had 0, 1000 head of birds. It is unclear if this 0 values refers to 0 birds or less than 1000 birds. Low values appear to be mostly dependent on a combination of the item and the area, but may also take into account the year in some cases. There may not be many species of bird living in a certain area, such as turkeys on tropical islands, thus explaining the 0 Value. The year of the bird-stock alone did not seem to significantly determine the low values, as the 50 years with the lowest values ranged from 1963-2018. For some cases, there may be other natural factors contributing to 0 Values in certain areas during specific year. For example, for a year with a widespread avian flu there may be no or few of a certain bird-stock in an area due deaths or preventative killing of birds. In contrast to the highest values being determined from aggregate data, the 50 lowest values were determined from official data, FAO estimates, and FAO with imputations.

###Subgroup of Area and Value

After exploring the data, I thought it would be most interesting to look at the relationship between the subgroup of Area and Value. This is because after looking at the top 50 and bottom 50 values, area seemed to contribute more to the highest and lowest values than years or items.

####Central Tendency

Using the %>%, group_by(), select(),summarize(), and arrange() functions, I created a table of the mean and median values per area, descending by median. I arranged the data-set by median as it is less likely to be skewed by outliers. The areas with highest median Values descending from the highest are "World," "China, mainland", "USSR", "United States of America", "Nigeria", "Asia", "Eastern Asia", "India", "Americas" and "Indonesia". It made sense that the World has the highest median value of all areas, but I was surprised that the China (mainland), USSR, the USA, and Nigeria all had a higher area median value than Asia when comparing this subgroup statistics to the highest 50 values, which were all based in the area of World or Asia. This goes to show that a single value can be an outlier, while the median is a more reliable measure of Values. A confusing finding is that the median Value for the USA is higher than the median value for "the Americas" which the USA is a part of, so I'd be curious to know what brought the median down for the Americas.

Descending, the 10 lowest median values by area were Liechtenstein, Papua New Guinea, Saint Helena, Ascension and Tristan da Cunha, Jordan, Cayman Islands, Saint Pierre and Miquelon, Nauru, Tokelau, Falkland Islands (Malvinas), and Aruba. It follows earlier patterns observed from the lowest 50 values that islands comprised the majority of area with low values, as the climate of small islands is likely not conducive for poultry-stock. Liechtenstein and Jordan do not follow this pattern, as a small German town and a West-African country, and it would be interesting to learn why they are on this list. These ten areas with the lowest median values ranged from **0-12,000 birds** (0-12, units of 1,000 head) which means these areas likely need to rely heavily on poultry imports or other protein sources.

Looking at the subgroups, the mean and median values by area are much more close in to one another than than the median and mean of all un-grouped values in the data set. For example, the mean Value for the area of the world is **2.57 billion bird**, which is almost **8 times** larger than the median Values for the area of the world (**328 million birds**\*).This area based mean and median are much closer in value then the non-subgroup mean and median of all values in the data set -- the mean value of the data set is **99.4 millions birds**, which is **55** times larger than the median value of the data set (**1.8 million birds**). The fact that taking into account area greatly decreases the difference between the mean and median values supports that the area of a bird-stock significantly determines the value of the bird-stock.

#####Dispersion

Lastly, I created a table of the minimum, maximum, standard deviation, and IQR of values by area, in descending order by IQR. IQR was selected as it is a better measure of spread than sd with outliers in the data set. I then compared the IQR and sd of the area subgroup to the IQR and sd from the entire data-set to see how grouping by area impacted the spread of the data. The IQR of Value for the world was was **986 million birds** and the sd of Value for the world was **5.3 billion birds**. For the entire data set, the IQR value of **15.2 millions bird** and sd of values was **720.6 million birds**. At first I was confused why there was larger spread for the world specific values then for the general data set, especially because both have the same maximum of **23.7 billion birds**, but the world data set had a minimum value of **12 million birds** while the entire data set had a minimum value of **0 birds**. But then thinking back to what IQR and sd measure, its spread of the data, not the range. Returning to the first bar charts I created to determine the mode for the entire Birds data set, most of the data was concentrated in the lower values (0-25 units of 1000 heads), explaining why the entire Bird data set less spread of values than the world specific values.



```{r}
#calculating mean and means of the Value column, removing na from dataset
summarise(Birds, mean_value = mean(Value, na.rm=TRUE), median_value = median(Value, na.rm=TRUE))
#calculating the sd, min, max, and IQR of the Value column data set
summarise(Birds, min_value = min(Value, na.rm = TRUE), max_value = max(Value, na.rm = TRUE), sd_value = sd(Value, na.rm = TRUE), IQR_Value = IQR(Value, na.rm = TRUE))

#Most valuable 50 rows, selecting for item, area, year, flag, and flag description 
Birds%>%
  arrange(desc(Value)) %>%
  select(Item, Area, Value, Year, Flag, `Flag Description`) %>%
  slice(1:50)
  
#Least valuable 50 rows, selecting for item, area, year, flag, and flag description
Birds %>%
  arrange(Value)%>%
  select(Item, Area, Value, Year, Flag, `Flag Description`) %>%
  slice(1:50)
  
#Creating a bar chart of Values to identify the mode, using the xlim() function
Birds <- read_csv("_data/birds.csv")
ggplot(Birds, aes(Value)) + geom_bar()+ xlim(0,180) 
#narrowing in to identify mode
ggplot(Birds, aes(Value))+ geom_bar() + xlim(0,8)


#Using group_by(), select(), summarize(), and arrange() to generate a table of Area of mean and median value descending by the median value
Birds %>%
  group_by(Area)%>%
  select(Area, Value) %>%
  summarise( mean_value= mean(Value, na.rm=TRUE), median_value = median(Value, na.rm = TRUE)) %>%
  arrange(desc(median_value))


#Using group_by(), select(), summarize(), and arrange() to generate a table of Area of min, max, sd_value, and IQR_value descending by 
Birds %>%
  group_by(Area)%>%
  select(Area, Value) %>%
  summarise(min_value = min(Value, na.rm = TRUE), max_value = max(Value, na.rm =TRUE), sd_value= sd(Value, na.rm=TRUE), IQR_value = IQR(Value, na.rm = TRUE)) %>%
  arrange(desc(IQR_value))



```
